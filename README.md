# Ascension (Dojo Version)

## Running locally:
```
cd dojo-starter && sozo build
katana --disable-fee --dev --block-time 1000
sozo migrate
torii --world 0x33ac2f528bb97cc7b79148fd1756dc368be0e95d391d8c6d6473ecb60b4560e
cd ../client 
bun run dev
sh ./scripts/default_auth.sh
```

## Temporary hack for custom contract events: 
Currently there are some client components used to decode custom contract events. As these will be overwritten every time ```bun run create-components``` is executed, they can be added at the bottom of the contractComponets.ts file.

 ```
 contractComponents.ts
 
// autogenerated contract components
...
    PlayerSpawned: (() => {
      return defineComponent(
        world,
        {
          timestamp: RecsType.BigInt,
          position: { x: RecsType.Number, y: RecsType.Number },
          gameId: RecsType.BigInt,
          player: RecsType.String,
        },
        {
          metadata: {
            name: "PlayerSpawned",
            types: ["felt252", "u32", "u32", "felt252", "felt252"],
            customTypes: ["Vec2"],
          },
        }
      );
    })(),
    GameStarted: (() => {
      return defineComponent(
        world,
        { startTime: RecsType.BigInt, gameId: RecsType.BigInt },
        {
          metadata: {
            name: "GameStarted",
            types: ["felt252", "felt252"],
            customTypes: [],
          },
        }
      );
    })(),
 ```


### Graphql:
Grpahql playground: http://0.0.0.0:8080/graphql

Example queries:

```
//retrieve all player models
query {
  playerModels {
    edges {
      node {
        player
        gameId
      }
    }
  }
}

//retrieve all position models
query {
  positionModels {
    edges {
      node {
        player
        vec {x y}
      }
    }
  }
}

```

